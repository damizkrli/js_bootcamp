<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercice 2 - Pratiquons les classes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<style>
    #myDIV {
        width: 100%;
    }
</style>

<body">
    <div class="container">
        <h1>Exercice 2</h1>
        <hr>


        <p>
            Dans cet exercice on cherche à gérer une bibliothèque de livres. On commencera par créer une class qui
            permettra de représenter un livre (on construira l'objet avec un titre et un nombre de page). On aura
            ensuite plusieurs propriétés / méthodes utiles
        </p>

        <ul>
            <li style="list-style: none;"><input style="margin-right: 10px;" type="checkbox">page, renverra la page
                courante du livre (1 par défaut)
            </li>
            <li style="list-style: none;"><input style="margin-right: 10px;" type="checkbox">nextPage(), permet de
                tourner la page et incrémentera
                la page courant </li>
            <li style="list-style: none;"><input style="margin-right: 10px;" type="checkbox">close(), permet de fermer
                un livre (revenir à la 1ère
                page) </li>
        </ul>

        <p>Ensuite on créera une classe <code>Library</code> pour organiser nos livres.</p>

        <ul>
            <li style="list-style: none;"><input style="margin-right: 10px;" type="checkbox">addBook(), permet de
                rajouter un livre à la
                bibliothèque </li>
            <li style="list-style: none;"><input style="margin-right: 10px;" type="checkbox">addBooks([]), permet de
                rajouter plusieurs livres d'un
                coup (on lui passera un tableau)
            </li>
            <li style="list-style: none;"><input style="margin-right: 10px;" type="checkbox">findBooksByLetter('s'),
                permet de lister tous les
                livres qui ont un titre qui commence par la lettre indiquée
            </li>
        </ul>

        <!-- <img src="#" alt="#"> -->

        <br>

        <button class="btn btn-danger" onclick="hideAndShow()">Afficher la réponse</button>

        <br>

        <!-- Mettre la réponse ici sous forme d'image exoNUM(CHAPITRE).png -->
        <script>
            class Livre {

                #page = 1

                constructor(titre, pages) {
                    this.titre = titre
                    this.pages = pages
                }

                get page() {
                    return this.#page
                }

                nextPage() {
                    if (this.#page < this.pages) {
                        this.#page++
                    }
                }

                close() {
                    this.#page = 1
                }

            }

            class Library {
                
                #books = []

                addBook(book) {
                    this.#books.push(book)
                }

                addBooks(books) {
                    books.forEach(this.addBook, this) // ATTENTION C'EST forEach
                }

                findBooksByLetter(letter) {
                    return this.#books.filter((livre) => livre.title[0].toLowerCase() === letter.toLowerCase())

                }

            }

            const shining = new Livre('Shining', '300')
            console.log(shining) // titre : Shining, pages 300 OK
            console.log(shining.page) // 1 OK
            shining.nextPage()
            console.log(shining.page)
            shining.nextPage()
            console.log(shining.page)
            shining.close()
            console.log(shining.page)

            const l = new Library()
            console.log(l) // pas de livre dans l
            l.addBook(shining) // ajout de shining dans l avec addBook
            console.log(l) // shining dans l
            l.addBooks([
                new Livre('Ready Player One', 100),
                new Livre('Le cercle des poètes disparu'),
                new Livre('Coder Proprement'),
            ])
            console.log(l.findBooksByLetter('C'))


        </script>

        <div id="myDIV" style="display: none; margin-top: 10px;">
            <img src="#" alt="exo2" />
        </div>

        <script>
            function hideAndShow() {
                let x = document.getElementById("myDIV");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
        </script>

        <br>

        <button class="btn btn-success">
            <a style="text-decoration: none; color: black;" href="/index.html">RETOUR</a>
        </button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    </body>
    </body>

</html>