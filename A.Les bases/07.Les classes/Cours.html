<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les Classes</title>
</head>
<style>
    #myDIV {
        width: 100%;
        text-align: center;
    }
</style>

<body style="text-align: center;">
    <h1>Les classes</h1>

    <p>Dans le Javascript, le prototype est un mécanisme qui permet aux objets d'hériter des propriétés d'autres objets.
    </p>
    <p><i><a href="https://developer.mozilla.org/fr/docs/Learn/JavaScript/Objects/Object_prototypes">Prototypes
                Objet</a></i></p>

    <p>Syntaxe des classes</p>
    <img src="class_syntaxe.png" alt="class_syntaxe">

    <p>Exemple : </p>
    <img src="prototype.png" alt="prototype">
    <br>
    <p>Dans l'exemple ci-dessus, on peut voir la création d'un élève à partir de la classe, Student</p>
    <p></p>


    <br>
    <p> Création d'un constructeur dans la classe </p>
    <img src="constructor.png" alt="constructor">

    <p>Création d'une méthode dans la classe</p>
    <img src="methode.png" alt="methode">

    <p>
        Grâce au système de prototype on peut créer des méthodes qui vont être partagées. Dans notre objet la méthode
        <i>constructor</i> et <i>setNotes</i> ne
        sont pas disponibles, mais elles sont disponibles au niveau du prototype. On a donc la possibilité de les
        appeler sur chaque instance de l'objet, car
        ils utilisent conjointement le même prototype <i>Student</i>. Et il est donc possible de bénéficier des
        propriétés au niveau de l'objet.
    </p>

    <p>
        Par exemple, il est possible de mettre en place des méthodes de vérification dans une classe afin de valider des
        conditions. Dans le cas suivant,
        on vérifie qu'un élève à une moyenne suffisamment haute pour passer dans la classe suivante. La méthode
        <i>moyenne()</i> est donc utilisée dans
        la classe, puis on fait référence à l'objet <i>(this)</i> pour accéder aux notes de l'élève et mettre en place
        une condition de vérification.
    </p>
    <img src="methode_moyenne.png" alt="methode_moyenne">

    <p>Setter & Getter :</p>
    <p>Les <i><u>Setter</u></i> sont appelés automatiquement lorsque l'on définit une valeur (ex: setNotes).</p>

    <img src="setter.png" alt="">
    <p></p>

    <p>
        Les <i><u>Getter</u></i> permettent d'accéder à une propriété. Par exemple, on souhaite récupérer le nom d'un
        utilisateur au format suivant : "nom prenom". A la différence des setter, le Getter n'as pas besoin de
        paramètres,
        pour afficher les données : on peut directement passer le getter dans le console.log
    </p>

    <img src="getter.png" alt="getter">

    <p>On peut également définir les méthodes directement sur notre objet : </p>
    <img src="static.png" alt="static">

    <p>
        Si on note <u>Student.name</u> dans la console, on peut noter qu'elle renvoi le résultat. Avec le mot clé
        <i><u>STATIC</u></i>,
        on peut définir des éléments qui ne sont pas pas dans le prototype des objets initialisés au début ("const
        damien = new Student('', '')")
        mais qui seront directement disponibles sur l'objet Student. Cette syntaxe fonctionne également avec une
        fonction.
    </p>

    <img src="static_function.png" alt="static_function">

    <p>De ce fait, le mot clé <u>Static</u> peut servir de constante et être utilisé comme tel : </p>
    <img src="staticAsConst.png" alt="staticAsConst">

    <p>Comment faire un prototype d'un prototype</p>
    <p>
        Dans le cas ci-dessous, si un élève appartient à l'objet <u>SuperStudent</u> il aura accès a la méthode 
        <i>canPass()</i> de ce prototype, à la place de la méthode du prototype <u>Student</u>. Dans notre exemple,
        la méthode <i>canPass()</i> de l'objet <u>SuperStudent</u> permet à l'élève de passer en classe supérieure
        même si ses notes ne le permettent pas. Dans la console, on peut constater que si on appelle nom.canPAss()
        c'est la méthode du prototype <u>SuperStudent</u> qui est appelé.
    </p>

    <img src="prototype_d_un_prototype.png" alt="prototype_d_un_prototype">

    <p>
        Il est également possible d'utiliser des méthodes du prototype <strong>parent</strong> grâce au mot clé 
        <strong>super</strong>.
    </p>

    <img src="super.png" alt="super">

    <p>Dans le constructeur, le <strong>super</strong> peut être utilisé comme fonction avec des paramètres. 
    De ce fait, <strong>Super</strong> est un peu l'équivalent de l'objet <u>Student</u>.
    </p>

    <img src="super_constructor.png" alt="super_constructor">

    <p>On peut ensuite utiliser ce qui à été renseigné par l'utilisateur</p>

    <img src="super_constructor (1).png" alt="super_constructor(1)">

    <p>On a également la possibilité d'avoir des variables internes.</p>
    <p>Il est possible de rendre les variables privées avec "#" qui <strong>dépendent du contexte
        dans lequel elle sont appelées.</strong>. C'est assez récents dans le Javascript, les développeurs 
        préfère donc l'utilisation du <strong>undescore</strong> pour ce genre de variables.
    </p>

    <img src="private.png" alt="private">

    <script>

        const moyenne = (notes) => {
            let sum = 0
            for (let note of notes) {
                sum = sum + note
            }
            return sum / notes.length
        }

        class Student {
            ecole = 'Emile Zola'
            #notes = []

            // méthode
            constructor(firstname, lastname) {
                this.firstname = firstname
                this.lastname = lastname
            }

            set notes(v) {
                if (Array.isArray(v)) {
                    this.#notes = v
                }
            }

            get name() {
                return `${this.firstname} ${this.lastname}`
            }

            // méthode : permet de calculer la moyenne d'un élève et si il peut passer en classe supérieure
            canPass() {
                return moyenne(this.#notes) >= 10
            }


            static moyenne = 10

            static hello() {
                console.log("Hello World")
            }
        }

        class SuperStudent extends Student {

            #notes = []

            constructor (firstname, lastname, notes) {
                super(firstname, lastname)
                this.#notes = notes
            }

            get name () {
                return 'Super ' + super.name 
            }

            canPass() {
                return super.canPass()
            }
        }

        const damien = new SuperStudent('Damien', 'Carli', [8, 4, 2, 10])
        const antonia = new Student('Antonia', 'Dupa')
        damien.notes = [8, 4, 2, 10]
        antonia.notes = [8, 14, 2, 10]
        console.log(damien.canPass(), antonia.canPass())
        console.log(damien.name)
    </script>

    <br>

    <button>
        <a style="text-decoration: none; color: black;" href="/index.html">RETOUR</a>
    </button>
</body>

</html>